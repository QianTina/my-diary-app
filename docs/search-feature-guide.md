# 搜索功能使用指南 Search Feature Guide

## 概述 Overview

日记应用现在提供了**混合搜索方案**，结合了快速搜索和高级搜索两种模式，让你可以根据不同场景选择最合适的搜索方式。

The diary app now offers a **hybrid search solution**, combining quick search and advanced search modes, allowing you to choose the most suitable search method for different scenarios.

---

## 🚀 快速搜索 Quick Search

### 在哪里使用 Where to Use

快速搜索在以下页面可用：
- **动态页面** (Dashboard) - `/`
- **归档页面** (Archive) - `/archive`

### 功能特点 Features

✅ **实时过滤** - 输入即搜索，无需等待
✅ **简单快捷** - 只需输入关键词
✅ **当前页面** - 在当前视图中过滤，无需跳转
✅ **标签筛选** - 动态页面支持标签快速筛选

### 使用场景 Use Cases

- 快速查找最近的日记
- 在当前列表中过滤内容
- 简单的关键词搜索
- 按标签快速筛选（仅动态页面）

### 如何使用 How to Use

1. 在动态或归档页面顶部找到搜索框
2. 输入关键词（搜索标题和内容）
3. 结果实时显示在当前页面
4. 点击"高级搜索"按钮可跳转到完整搜索页面

---

## 🔍 高级搜索 Advanced Search

### 访问方式 Access Methods

有三种方式打开高级搜索：
1. **键盘快捷键**: `Cmd+K` (Mac) 或 `Ctrl+K` (Windows/Linux)
2. **侧边栏**: 点击"搜索"图标
3. **快速搜索**: 点击搜索框旁的"高级搜索"按钮

### 功能特点 Features

✅ **全文搜索** - 搜索标题和内容
✅ **多维度过滤** - 标签、心情、日期范围
✅ **搜索历史** - 自动保存最近10次搜索
✅ **高级过滤器** - 可折叠的过滤器面板
✅ **搜索词高亮** - 结果中高亮显示匹配词
✅ **清除过滤器** - 一键清除所有过滤条件

### 过滤选项 Filter Options

#### 1. 标签过滤 Tag Filter
- 多选标签（AND 逻辑）
- 只显示包含所有选定标签的日记
- 点击标签芯片可移除

#### 2. 心情过滤 Mood Filter
- 单选心情（开心、平静、一般、难过、生气）
- 只显示特定心情的日记
- 再次点击可取消选择

#### 3. 日期范围 Date Range
- 设置起始日期和结束日期
- 自动验证日期范围有效性
- 支持只设置起始或结束日期

### 使用场景 Use Cases

- 复杂的多条件搜索
- 查找特定时间段的日记
- 按心情回顾日记
- 查找包含多个标签的日记
- 重复之前的搜索（搜索历史）

### 如何使用 How to Use

1. 按 `Cmd/Ctrl+K` 或点击侧边栏"搜索"图标
2. 在搜索框输入关键词
3. 点击"高级过滤"展开过滤器面板
4. 选择标签、心情或日期范围
5. 查看实时更新的搜索结果
6. 点击"清除所有过滤器"重置搜索

---

## 💡 使用技巧 Tips

### 快速搜索 vs 高级搜索

**使用快速搜索当：**
- 你知道大概的关键词
- 只需要简单过滤
- 不想离开当前页面
- 查找最近的日记

**使用高级搜索当：**
- 需要多个过滤条件
- 查找特定时间段的日记
- 需要按心情筛选
- 想要保存搜索历史
- 需要精确的搜索结果

### 键盘快捷键 Keyboard Shortcuts

- `Cmd/Ctrl+K` - 打开高级搜索
- `Escape` - 清除搜索输入（在搜索框中）
- `Enter` - 打开选中的日记（在结果列表中）

### 搜索历史 Search History

- 自动保存最近10次搜索
- 点击历史记录快速重复搜索
- 每个用户的搜索历史独立存储
- 存储在本地浏览器中

---

## 🎨 界面说明 UI Guide

### 动态页面 Dashboard
```
┌─────────────────────────────────────────┐
│ [搜索框........................] [高级搜索] │
│ [#标签1] [#标签2] [#标签3] [清空筛选]    │
│ 显示 X / Y 条日记                        │
└─────────────────────────────────────────┘
```

### 归档页面 Archive
```
┌─────────────────────────────────────────┐
│ [搜索框........................] [高级搜索] │
│ 找到 X / Y 篇日记 · 跨越 Z 年            │
└─────────────────────────────────────────┘
```

### 高级搜索页面 Advanced Search
```
┌─────────────────────────────────────────┐
│ [搜索框.............................] [X] │
│ [搜索历史下拉]                           │
│                                          │
│ [高级过滤 ▼] (3)                         │
│ ┌────────────────────────────────────┐  │
│ │ 标签: [#tag1] [#tag2] [#tag3]      │  │
│ │ 心情: [😊] [😌] [😐] [😢] [😠]      │  │
│ │ 日期: [起始] - [结束]               │  │
│ └────────────────────────────────────┘  │
│                                          │
│ [清除所有过滤器]                         │
│                                          │
│ 找到 X 条日记                            │
│ [日记卡片1]                              │
│ [日记卡片2]                              │
│ [日记卡片3]                              │
└─────────────────────────────────────────┘
```

---

## 🔒 隐私和安全 Privacy & Security

- ✅ 所有搜索只返回当前用户的日记
- ✅ 搜索历史存储在本地浏览器
- ✅ 搜索查询不会出现在 URL 中
- ✅ 用户数据通过 RLS 策略隔离
- ✅ 搜索历史按用户 ID 独立存储

---

## 📱 响应式设计 Responsive Design

### 桌面端 Desktop
- 搜索框和高级搜索按钮并排显示
- 高级过滤器以内联面板形式展开
- 搜索结果以卡片网格显示

### 移动端 Mobile
- 搜索框占满宽度
- 高级搜索按钮只显示图标
- 高级过滤器可能以模态形式展开
- 搜索结果以单列显示

---

## 🎯 最佳实践 Best Practices

1. **日常浏览** - 使用动态页面的快速搜索和标签筛选
2. **查找旧日记** - 使用归档页面的快速搜索
3. **复杂查询** - 使用高级搜索的多维度过滤
4. **重复搜索** - 利用搜索历史快速重复
5. **快捷访问** - 记住 `Cmd/Ctrl+K` 快捷键

---

## 🚀 未来计划 Future Plans

可能的功能扩展：
- [ ] 保存常用搜索
- [ ] 搜索结果导出
- [ ] 搜索分析和统计
- [ ] 更多过滤选项（位置、天气等）
- [ ] 全文搜索优化（使用数据库索引）
- [ ] 搜索建议和自动完成

---

## 📞 反馈 Feedback

如果你有任何建议或发现问题，欢迎反馈！

If you have any suggestions or find issues, feel free to provide feedback!
